{"version":3,"file":"app-build/timeInterpolator.js","sources":["app/timeInterpolator.js","@traceur/generated/TemplateParser/6","@traceur/generated/TemplateParser/4","@traceur/generated/TemplateParser/1","@traceur/generated/TemplateParser/2","@traceur/generated/TemplateParser/5","@traceur/generated/TemplateParser/10"],"names":[],"mappings":"AAEA;ACFA,KAAK,iBAAiB,AAAC,CAAC,OAAM;SCA9B,EAAC,GAAE,YCAqB;AAAE,uBAAwB;IAAE,ADA9B,CAAC;AEAvB,WAAS,CCAT,EAAC,KAAI,CDAO,KAAG,ACAS,CAAC;CJAyB,CAAC;ADEnD,AAAI,EAAA,CAAA,KAAI,EAAI,CAAA,OAAM,AAAC,CAAC,SAAQ,CAAC,CAAC;AAE9B,AAAI,EAAA,CAAA,YAAW,IAAI,SAAA,AAAC;OAAK,CAAA,OAAM,OAAO,AAAC,EAAC,CAAE,CAAA,CAAC,EAAE,KAAG,CAAA,CAAI,CAAA,OAAM,OAAO,AAAC,EAAC,CAAE,CAAA,CAAC,EAAE,QAAM;AAAA,CAAA,CAAC;AMJ/E,AAAI,EAAA,CAAA,UAAS,ENQE,UAAS,SAAQ;AAE9B,UAAQ,IAAI,AAAC,CAAC,wBAAuB,CAAC,CAAC;AAEvC,AAAI,IAAA,CAAA,gBAAe,EAAI,CAAA,CAAC,SAAQ,KAAK,AAAC,CAAC,CAAA,GAAE,SAAC,QAAO,CAAE,CAAA,OAAM;SAAM,CAAA,OAAM,EAAE,SAAO;EAAA,EAAC,CAAC,KAAK,AAAC,CAAC,CAAA,CAAC,CAAC;AAEzF,AAAI,IAAA,CAAA,SAAQ,EAAI,IAAI,CAAA,KAAI,IAAI,AAAC,EAAC,CAAC;AAE/B,AAAI,IAAA,CAAA,gBAAe,EAAI,IAAI,CAAA,KAAI,IAAI,AAAC,EAAC,CAAC;AAItC,UAAQ,QAAQ,AAAC,CAAC,SAAS,CAAA,CAAG;AAAC,YAAQ,KAAK,AAAC,CAAC,YAAW,AAAC,EAAC,CAAC,CAAA;EAAC,CAAC,CAAA;AAE9D,AAAI,IAAA,CAAA,qBAAoB,EAAI,CAAA,CAAC,SAAQ,KAAK,AAAC,CAAC,CAAA,GAAE,SAAC,QAAO,CAAE,CAAA,OAAM;SAAM,CAAA,OAAM,EAAE,SAAO;EAAA,EAAC,CAAC,KAAK,AAAC,CAAC,CAAA,CAAC,CAAC;AAG9F,AAAI,IAAA,CAAA,aAAY,EAAI,CAAA,KAAI,QAAQ,AAAC,EAAC,SAAC,IAAG,CAAG,CAAA,QAAO,CAAG,CAAA,SAAQ,CAAE,CAAA,aAAY,CAAM;AAAC,SAAO;AAAC,iBAAW,CAAE,KAAG;AAAG,aAAO,CAAE,SAAO;AAAG,mBAAa,CAAE,UAAQ;AAAG,kBAAY,CAAG,cAAY;AAAA,IAAC,CAAA;EAAC,EACnL,CAAA,SAAQ,KAAK,AAAC,CAAC,CAAA,CAAC,CAAG,iBAAe,CAAG,CAAA,SAAQ,KAAK,AAAC,CAAC,CAAA,CAAC,CAAG,sBAAoB,CAAC,CAAC;AAGhF,AAAI,IAAA,CAAA,YAAW,EAAI,EAAA,CAAC;AAEpB,AAAI,IAAA,CAAA,OAAM,EAAE,EAAA,CAAC;AAEb,cAAY,QAAQ,AAAC,CAAC,SAAS,KAAI;AACjC,AAAI,MAAA,CAAA,gBAAe,IAAI,SAAA,AAAC;WAAK,CAAA,UAAS,AAAC,CAAC,SAAQ,AAAC,CAAE;AACjD,AAAI,UAAA,CAAA,GAAE,EAAI,CAAA,CAAC,YAAW,AAAC,EAAC,CAAA,CAAE,CAAA,KAAI,eAAe,CAAA,CAAE,QAAM,CAAC,EAAE,EAAC,KAAI,cAAc,EAAE,CAAA,KAAI,SAAS,CAAC,CAAC;AAC5F,WAAI,GAAE,EAAE,CAAA,KAAI,SAAS;AACnB,yBAAe,AAAC,EAAC,CAAC;AAAA,AACpB,uBAAe,KAAK,AAAC,CAAC,GAAE,EAAE,CAAA,KAAI,aAAa,CAAC,CAAC;MAE/C,CAAG,aAAW,CAAC;IAAA,CAAA,CAAC;AAChB,mBAAe,AAAC,EAAC,CAAC;EACpB,CAAC,CAAC;AAEF,OAAO,iBAAe,CAAC;AM5CQ,AN8CjC,CM9CiC;AN+CjC","sourceRoot":"app-build/","sourcesContent":["\n\nvar Bacon = require(\"baconjs\");\n\nvar getLocalTime = () => process.hrtime()[0]*1000 + process.hrtime()[1]/1000000;\n\n\n\nexport default function(baconTime) {\n\n  baconTime.log(\"absolute time received\");\n\n  var timeBetweenTicks = (baconTime.diff(0,(previous,current) => current-previous)).skip(1);\n\n  var localTime = new Bacon.Bus();\n\n  var interpolatedTime = new Bacon.Bus();\n\n\n\n  baconTime.onValue(function(v) {localTime.push(getLocalTime())})\n\n  var localTimeBetweenTicks = (localTime.diff(0,(previous,current) => current-previous)).skip(1);\n\n\n  var combinedTimes = Bacon.zipWith((time, timeDiff, localTime,localTimeDiff) => {return {externalTime:time, timeDiff:timeDiff, localStartTime:localTime, localTimeDiff: localTimeDiff}},\n    baconTime.skip(1), timeBetweenTicks, localTime.skip(1), localTimeBetweenTicks);\n\n\n  var resolutionMs = 3;\n\n  var latency=0;\n\n  combinedTimes.onValue(function(times) {\n    var nextInterpolated = () => setTimeout(function() {\n      var res = (getLocalTime()-times.localStartTime+latency)/(times.localTimeDiff/times.timeDiff);\n      if (res<times.timeDiff)\n        nextInterpolated();\n      interpolatedTime.push(res+times.externalTime);\n\n    }, resolutionMs);\n    nextInterpolated();\n  });\n\n  return interpolatedTime;\n\n}\n","Object.defineProperties(exports, $__placeholder__0);","{get: $__placeholder__0}","get $__placeholder__0() { return $__placeholder__1; }","__esModule: true","{value: $__placeholder__0}","var $__default = $__placeholder__0"]}